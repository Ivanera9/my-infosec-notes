# ğŸ§  Day 9 â€” Windows Boot & Drive Recovery (Real-World Failure)


**Focus:** System recovery, EFI boot repair, and drive permission restoration

---

## âš ï¸ Incident Summary
A full system crash occurred during normal operation â€” Windows failed to boot, the EFI partition was corrupted, and the secondary drive (D:) became inaccessible. The problem began while using a Kali live USB with **persistence** (the USB was removed after the host screen went black). After two corruption events I switched to running Kali inside a Virtual Machine (VirtualBox).  
Although I migrated to a VM for safety going forward, the recovery here is part of the same incident chain and is therefore relevant to my practical learning in system recovery and forensics.

---

## ğŸ” Symptoms
- Windows stuck in **Recovery Environment (WinRE)**  
- `bootrec /rebuildbcd` returned **â€œFile not foundâ€**  
- EFI partition unreadable (`dir Z:` â†’ empty)  
- Drive **D:** inaccessible (â€œAccess Deniedâ€)  
- Safe Mode accessible, but permissions and ownership broken

---

## ğŸ§° Tools & Commands Used

### 1ï¸âƒ£ Bootloader & EFI Repair
Accessed Command Prompt via **Advanced Options â†’ Troubleshoot â†’ Command Prompt**, then ran:

```powershell
bootrec /fixmbr
bootrec /fixboot
bootrec /scanos
bootrec /rebuildbcd
When rebuildbcd failed with â€œfile not foundâ€, manually rebuilt the EFI partition:

powershell
Copy code
diskpart
list volume
select volume <EFI Volume>
assign letter=Z
exit
bcdboot C:\Windows /s Z: /f UEFI
Result: Boot configuration data recreated; system booted.

2ï¸âƒ£ File System Integrity Check
Repaired corrupted file tables and directory indexes:

powershell
Copy code
chkdsk C: /f
chkdsk D: /f
Result: File system repaired; no bad sectors reported.

3ï¸âƒ£ Drive Permission & Ownership Fix
Drive D: remained inaccessible after repairs. Tried CLI then GUI:

CLI:

powershell
Copy code
takeown /f D:\ /r /d y
icacls D:\ /grant administrators:F /t /c
icacls D:\ /reset /t /c
Partial success. Final fix via GUI:

Right-click D:\ â†’ Properties â†’ Security â†’ Advanced

Change Owner to current user account

Check Replace all child object permission entriesâ€¦ and apply

Result: Full access restored to D: drive. A few protected system folders still showed â€œAccess Deniedâ€ but user data and main directories were recoverable.

4ï¸âƒ£ BIOS & Boot Settings Validation
Disabled Secure Boot

Confirmed UEFI Mode active

Kept Legacy Support disabled

Result: System booted normally after restart.

ğŸ§© Key Takeaways
EFI corruption can appear to be total system failure; bcdboot can rebuild EFI/BCD when bootrec struggles.

NTFS "Access Denied" often equals broken ACLs â€” ownership changes restore access.

GUI ownership propagation is faster on large trees than recursive CLI fixes.

Using live persistence on removable media can cause host instability if the device is removed improperly â€” run in a VM for safer, repeatable practice.

ğŸ§  Final Outcome
Component	Status
Bootloader	âœ… Repaired
EFI Partition	âœ… Rebuilt
Drive D:	âœ… Unlocked
File System	âœ… Repaired
System Integrity	âœ… Verified (sfc /scannow)

âš™ï¸ Core Commands Reference
powershell
Copy code
bootrec /fixmbr
bootrec /fixboot
bootrec /rebuildbcd
bcdboot C:\Windows /s Z: /f UEFI
chkdsk D: /f
takeown /f D:\ /r /d y
icacls D:\ /grant administrators:F /t /c
ğŸ’¡ Reflection
This was a real recovery operation â€” not a lab exercise. The failure began during live persistence usage (improper removal after the host display went black), which forced me to adopt VirtualBox for safer tooling. Recovering the boot chain and permissions taught me more about Windows internals and NTFS ACLs than any tutorial could. This incident ties directly to my cybersecurity learning â€” itâ€™s both a caution about tooling choices and a hands-on lesson in system forensics.

â€œYou donâ€™t understand systems until you break and rebuild them.â€
